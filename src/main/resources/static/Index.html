<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
</head>
<body>
<div style="border: solid aqua 3px; max-width : 75%; ">
    <h1>Bestilling av Kinobiletter</h1>
    <div>
        <p>Velg film:</p>
        <select id="nedfallMeny">
            <option></option>
            <option>James Bond</option>
            <option>The Dark Knight Rises</option>
            <option>Shrek 7</option>
        </select><br>
    </div>
    <div>
        <p>Antall Biletter</p>
        <input id="AntallID"><br>
    </div>
    <div>
        <p>Fornavn</p>
        <input id="FornavnID"><br>
        <p>Etternavn</p>
        <input id="EtternavnID"><br>
        <p>Telefonnr</p>
        <input id="TelefonnrID"><br>
        <p>Epost</p>
        <input id="EpostID">
    </div><br>
    <button id="Kjopknapp">Kjøp biletter</button>
    <br>
    <table id="biletterKjopt"></table>

    <h2 id="AlleBilleterID">Alle biletter</h2>
    <button id="Slettknapp">Slett alle bilettene</button>
    <script type="text/javascript">

        let film;
        let antall;
        let fornavn;
        let etternavn;
        let telefonnr;
        let epost;
        let clickCounter = 0;
        const tableRowText = "tablerow";
        const knappFjernTekst = "Fjern";

        $("#Kjopknapp").click(function() {
            film = $('#nedfallMeny').val();
            antall = $('#AntallID').val();
            fornavn = $('#FornavnID').val();
            etternavn= $("#EtternavnID").val();
            telefonnr = $('#TelefonnrID').val();
            epost = $('#EpostID').val();


            if (epost === "" || /^.+@.+\..+$/.test(epost) === false) {
                alert("Skriv inn en gyldig epost, du glemte muligens '@' eller '.' i epostadressen din.");
                return;
            }

            if(telefonnr === "" || isNaN(telefonnr) === true || telefonnr.length !== 8){
                alert("Telefonnummeret var enten ikke skrevet inn, hadde tegn eller bokstaver i seg, eller var ikke 8 siffere, prøv igjen.");
                return;
            }

            if(etternavn === "" || isNaN(etternavn) === false){
                alert("Det var ikke skrevet inn ett etternavn, skriv inn ett etternavn.");
                return;
            }

            if(fornavn === "" || isNaN(fornavn) === false){
                alert("Fornavnet var ikke skrevet inn, skriv inn ett fornavn.");
                return;
            }

            if(antall === "" || isNaN(antall) === true){
                alert("Bilettantall var ikke valgt, skriv inn ett antall.");
                return;
            }

            if(film === ""){
                alert("Det var ingen film valgt, velg en film.");
                return;
            }



            $("#biletterKjopt").append
            (`<tr id='${tableRowText}${clickCounter}'>` + "<td>" +
                `Film : ${film} ` + "</td>" + "<td>" +
                `Antall : ${antall}` +"</td>" + "<td>" +
                `Fornavn : ${fornavn}` +"</td>" + "<td>" +
                `Etternavn: ${etternavn} ` + "</td>" + "<td>" +
                `Telefonnr : ${telefonnr}` +"</td>" + "<td>" +
                `Epost : ${epost}` +"</td>" +
                `<td><button id="${knappFjernTekst}${clickCounter}">
Fjern</button></td>` +
                "</tr><br>");
            clickCounter++;
        });

        $("#Slettknapp").click (function() {
            $("#biletterKjopt").empty();
        });

        $("#biletterKjopt").on("click", "button", function() {
            var rowId = $(this).closest("tr").attr("id");
            $("#"+`${rowId}`).remove();
        });
    </script>
    <style>
        table, td{
            border: black solid 1.5px;
            margin: 0;
        }

        div {
            margin-bottom: 10px;
        }

        p, input, select{
            display: inline-block;
        }
    </style>
</div>
</body>
</html>
